#!/home/dxh594/Fall2020/cs594/hw4/amos-3.1.0/bin/runAmos -C
# `gene_asm' - Gene Assembler 

#--------------------------------------- USER DEFINED VALUES ------------------#
PREF = $(strip .afg PREFIX)
TGT = $(PREF).afg
#------------------------------------------------------------------------------#

BINDIR=/home/dxh594/Fall2020/cs594/hw4/amos-3.1.0/bin

BANK    = $(PREF).bnk
CONTIG  = $(PREF).contig
FASTA   = $(PREF).fasta

INPUTS  = $(TGT) $(AA)
OUTPUTS = $(CONTIG) $(FASTA)


## Building AMOS bank
10: $(BINDIR)/bank-transact -c -z -b $(BANK) -m $(TGT)

## Running overlap
20: $(BINDIR)/hash-overlap -B $(BANK)

## Running contigger
30: $(BINDIR)/tigger -b $(BANK)

## Running consensus
40: $(BINDIR)/make-consensus -B -b $(BANK)

## Outputting contigs
50: $(BINDIR)/bank2contig $(BANK) > $(CONTIG)

## Converting to FastA file
60: $(BINDIR)/bank2fasta -b $(BANK) > $(FASTA)
